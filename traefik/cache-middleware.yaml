apiVersion: traefik.io/v1alpha1
kind: Middleware
metadata:
  name: cache
  namespace: traefik
spec:
  plugin:
    souin:
      default_cache:
        ttl: 120s
        stale: 25m
        default_cache_control: public, max-age=3600
        allowed_http_verbs:
          - GET
          - HEAD
        redis:
          url: "redis://cache:6379"
        regex:
          exclude: '/health|/metrics'
      log_level: info
